import 'package:instagram_clone/app/locator.dart';import 'package:instagram_clone/app/router.gr.dart';import 'package:instagram_clone/models/bookmark_dao.dart';import 'package:instagram_clone/models/global_data.dart';import 'package:instagram_clone/models/home_data_model.dart';import 'package:instagram_clone/services/home_data_services.dart';import 'package:stacked/stacked.dart';import 'package:stacked_services/stacked_services.dart';class HomeViewModel extends FutureViewModel {  final HomeDataService homeDataService = locator<HomeDataService>();  final DialogService _dialogService = locator<DialogService>();  final NavigationService _navigationService = locator<NavigationService>();  final isBookMarked;  HomeViewModel(this.isBookMarked);  BookMarkDao bookMarkDao = BookMarkDao();  String get title => 'Instagram';  ///retrieving home data list  Future getHomeData() async {    setBusy(true);    ///local db    if (isBookMarked) {      GlobalData.homeDataModel = await bookMarkDao.getAllBookMarks();      setBusy(false);      if (GlobalData.homeDataModel.isEmpty) {        await _dialogService.showDialog(          title: 'No Data',          description: 'No Bookmarks Found',        );      }    } else {      ///network      var result = await homeDataService.getHomeData();      setBusy(false);      if (result.statusCode == 200) {        GlobalData.homeDataModel = homeDataModelFromMap(result.data);      } else {        await _dialogService.showDialog(          title: 'Network Failure',          description: 'Something went wrong',        );      }    }  }  void viewComment() {    _navigationService.navigateTo(Routes.commentView);  }  @override  Future futureToRun() => getHomeData();  ///adding book mark  void saveBookmark(HomeDataModel homeDataModel) async {    bookMarkDao.insert(homeDataModel);    await _dialogService.showDialog(      title: 'Success',      description: 'Add to bookmarks',    );  }}